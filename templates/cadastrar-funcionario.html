<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Funcionario</title>

    <!-- fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">

    <!-- normalize (utilizado para responsividade) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" 
        integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" 
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- importar aquivos css -->
    <link rel="stylesheet" href="../static/style/global.css" >
    <link rel="stylesheet" href="../static/style/cabecalho.css" >
    <link rel="stylesheet" href="../static/style/cadastro.css" >

</head>

<body>
    <header class="cabecalho">
        <a href="/">
            <img src="../static/imgs/logo.png" class="imagem">
        </a>
        <nav class="itens"> <!-- Barra de navegação responsiva -->
            <a href="./home.html" class="nav-link">Home</a>

            <a href="./galeria.html" class="nav-link">Fotos</a>

            <a href="./cadastrar-endereco.html" class="nav-link">Endereços</a>

            <a href="./agendar-consulta.html" class="nav-link">Consultas</a>

            <a href="./cadastrar-prontuario.html" class="nav-link">Prontuários</a>

            <a href="./cadastrar-funcionario.html" class="nav-link">Cadastro Funcionário</a>

            <a href="./cadastrar-paciente.html" class="nav-link">Cadastro Paciente</a>

            <a href="./listagem.html" class="nav-link">Listagens</a>

            <a href="./login.html" class="nav-link">Login</a>
        </nav>
    </header>
    <div class="principal">
        <form method="post" action="/cadastrar-funcionario" id="uploadForm" enctype="multipart/form-data">
            <div class="campos">
                <h2 class="subtitulo">Cadastro de Funcionário:</h2>
                <hr width="100%" noshade="">
                <label for="funcionario">Nome completo*:</label><br>
                <input type="text" name="funcionario" autocomplete="off" placeholder="Ex: Lucas Santos Rodrigues" ><br><br>
                <label for="email">Email*:</label><br>
                <input type="text" name="email" autocomplete="off" placeholder="Ex: lucasantos@gmail.com" ><br><br>
                <label for="telefone">Telefone*:</label><br>
                <input type="text" name="telefone" autocomplete="off" placeholder="Ex: (31) 99999-9999" ><br><br>
                <label for="cep">CEP*:</label>
                <input type="number" name="cep" autocomplete="off" placeholder="Ex: 30100200" ><br><br>
                <button type="button" onclick="buscarCEP(event)">Buscar</button><br><br>
                <label for="logradouro">Logradouro*:</label><br>
                <input type="text" name="logradouro" autocomplete="off" placeholder="Ex: Rua Santa Rita Durão 29" ><br><br>
                <label for="bairro">Bairro*:</label><br>
                <input type="text" name="bairro" autocomplete="off" placeholder="Ex: Savassi" ><br><br>
                <label for="cidade">Cidade*:</label><br>
                <input type="text" name="cidade" autocomplete="off" placeholder="Ex: Belo Horizonte" ><br><br>
                <label for="estado">Estado*:</label><br>
                <input type="text" name="estado" autocomplete="off" placeholder="Ex: Minas Gerais" ><br><br>
                <label for="contrato">Data de início do contrato:</label>
                <input type="date" name="contrato"></p>  
                <label for="salario">Salário*:</label><br>
                <input type="number" name="salario" autocomplete="off" placeholder="Ex: 12000,00" ><br><br>
                <label for="senha">Senha*:</label><br>
                <input type="text" name="senha" autocomplete="off" placeholder="Ex: iug2h38" ><br><br>
                <hr width="100%" noshade="">
                <label class="toggle">
                    <input type="checkbox" id="toggleButton">
                    <label for="funcionario">Funcionário médico?*:</label>
                </label>
                <div id="campos" class="oculto">
                    <label for="especialidade">Especialidade*:</label><br>
                    <input type="text" name="especialidade" autocomplete="off" placeholder="Ex: Oftalmologista" ><br><br>
                    <label for="crm">CRM*:</label><br>
                    <input type="text" name="crm" autocomplete="off" placeholder="Ex: CRM/MG 123456" ><br><br>
                </div>
            </div>
            <input type="submit" value="Enviar">
        </form>
    </div>

    <!-- importar arquivos js -->

    <!-- Adicione este script no cabeçalho do seu HTML -->
    <script type="text/javascript" src="../static/inputDinamico.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js" defer></script>

    <script>
        function buscarCEP(event) {
            event.preventDefault();
            var cepDigitado = document.getElementsByName('cep')[0];  // Obtenha o valor do campo, não o elemento

            if (cepDigitado){
                cepDigitado = cepDigitado.value;

                // Realiza uma requisição AJAX para a rota que busca o CEP usando Axios
                axios.post('/api/busca_cep', { cep: cepDigitado })
                    .then(function (response) {
                        var data = response.data;

                        if (data.success) {
                            if (data.success) {
                            // Preenche automaticamente os campos de bairro, logradouro, cidade e estado
                            var bairroInput = document.getElementsByName('bairro')[0];
                            var logradouroInput = document.getElementsByName('logradouro')[0];
                            var cidadeInput = document.getElementsByName('cidade')[0];
                            var estadoInput = document.getElementsByName('estado')[0];

                            if (bairroInput) bairroInput.value = data.bairro;
                            if (logradouroInput) logradouroInput.value = data.logradouro;
                            if (cidadeInput) cidadeInput.value = data.cidade;
                            if (estadoInput) estadoInput.value = data.estado;
                        } else {
                            alert('CEP não encontrado');
                        }
                    }
                    })
                    .catch(function (error) {
                        console.error('Erro na requisição:', error);
                    });
            }
            else {
                console.error('Elemento com o nome "cep" não encontrado no DOM.');
            }
        }

    </script>

</body>
</html> 
    
</body>

</html>